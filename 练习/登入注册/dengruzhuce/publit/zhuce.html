<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form action="http://127.0.0.1:5003/zhuce" method="POST">
        用户名:   <input type="text" name="name" required><span style="color: red;"></span> <br>
        密码:   <input type="password" name="password" required><span style="color: red;"></span><br>
        确认密码: <input type="password" name="repassword"  required><span style="color: red;"></span><br>
                <input type="submit" value="注册">
       </form>
       <script>
           const name=document.querySelector('input[name=name]');
           const paw=document.querySelector('input[name=password]');
           const repaw=document.querySelector('input[name=repassword]');
           const sub=document.querySelector('input[type=submit]');

           //定义三个开关
           let nameflag=false;
           let pawflag=false;
           let repawflag=false;

           name.onblur=function(){
               //获取数据
               const value=this.value;
               //判断正则
               const panduanzhi=/^[A-Za-z0-9]{6,18}$/.test(value);

               if(panduanzhi){
                   name.nextElementSibling.innerText=''
                   nameflag=true;
               }else{
                name.nextElementSibling.innerText='请输出6~18位的字母，数字'
                nameflag=false;
               }
           }
            paw.onblur=function(){
               //获取数据
               const value=this.value;
               //判断正则
               const panduanzhi=/^[\w]{6,18}$/.test(value);

               if(panduanzhi){
                   paw.nextElementSibling.innerText=''
                   pawflag=true
               }else{
                paw.nextElementSibling.innerText='请输出6~18位的字母，数字'
                pawflag=false;
               }
           }
           repaw.onblur=function(){
               //获取数据
               const value=this.value;
               //获取原数据
               const value1=paw.value;
               //判断
               if(value===value1){
                repaw.nextElementSibling.innerText=''
                repawflag=true
               }else{
                repaw.nextElementSibling.innerText='两次密码必须一致'
                repawflag=false;
               }
           }
           sub.onclick=function(e){
               if(!(repawflag&&pawflag&&nameflag)){
                e.preventDefault()
               }
           }
       </script>
</body>
</html>